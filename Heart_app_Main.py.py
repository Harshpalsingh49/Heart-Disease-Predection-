#!/usr/bin/env python
# coding: utf-8

# In[1]:


get_ipython().run_cell_magic('writefile', 'main.py', 'import streamlit as st\n\nimport numpy as np\n\nimport pickle\nfrom sklearn.preprocessing import StandardScaler\nscal=StandardScaler()\n\nwith open(r\'C:\\Users\\Harshpalsingh\\Desktop\\Heartapp.pkl\',\'rb\') as f:\n      model = pickle.load(f)\n\n\n\n\nst.set_page_config(page_title="Heart Disease Predictor",page_icon="⚕️",layout="centered",initial_sidebar_state="expanded")\n\n\n\ndef preprocess(oldpeak,exang,sex,thal,cp,slope,ca,restecg,age ):   \n \n    \n    # Pre-processing user input   \n    if sex=="male":\n        sex=1 \n    else: sex=0\n    \n    \n    if cp=="Typical angina":\n        cp=0\n    elif cp=="Atypical angina":\n        cp=1\n    elif cp=="Non-anginal pain":\n        cp=2\n    elif cp=="Asymptomatic":\n        cp=2\n    \n    if exang=="Yes":\n        exang=1\n    elif exang=="No":\n        exang=0\n\n \n    if slope=="Upsloping: better heart rate with excercise(uncommon)":\n        slope=0\n    elif slope=="Flatsloping: minimal change(typical healthy heart)":\n          slope=1\n    elif slope=="Downsloping: signs of unhealthy heart":\n        slope=2  \n \n    if thal=="fixed defect: used to be defect but ok now":\n        thal=6\n    elif thal=="reversable defect: no proper blood movement when excercising":\n        thal=7\n    elif thal=="normal":\n        thal=2.31\n\n    if restecg=="Nothing to note":\n        restecg=0\n    elif restecg=="ST-T Wave abnormality":\n        restecg=1\n    elif restecg=="Possible or definite left ventricular hypertrophy":\n        restecg=2\n\n\n    user_input=[oldpeak,exang,sex,thal,cp,slope,ca,restecg,age]\n    user_input=np.array(user_input)\n    user_input=user_input.reshape(1,-1)\n    user_input=scal.fit_transform(user_input)\n    prediction = model.predict(user_input)\n\n    return prediction\n\n    \n\n       \n    # front end elements of the web page \nhtml_temp = """ \n    <div style ="background-color:Yellow;padding:12px"> \n    <h1 style ="color:black;text-align:center;">Heart Disease Predictor</h1> \n    </div> \n    """\n      \n\n# display the front end aspect\nst.markdown(html_temp, unsafe_allow_html = True) \nst.subheader(\'by Harshpal Juneja \')\n      \n# following lines create boxes in which user can enter data required to make prediction\nage=st.selectbox ("Age",range(1,121,1))\nsex = st.radio("Select Gender: ", (\'male\', \'female\'))\ncp = st.selectbox(\'Chest Pain Type\',("Typical angina","Atypical angina","Non-anginal pain","Asymptomatic")) \n#trestbps=st.selectbox(\'Resting Blood Sugar\',range(1,500,1))\nrestecg=st.selectbox(\'Resting Electrocardiographic Results\',("Nothing to note","ST-T Wave abnormality","Possible or definite left ventricular hypertrophy"))\n#chol=st.selectbox(\'Serum Cholestoral in mg/dl\',range(1,1000,1))\n#fbs=st.radio("Fasting Blood Sugar higher than 120 mg/dl", [\'Yes\',\'No\'])\n#thalach=st.selectbox(\'Maximum Heart Rate Achieved\',range(1,300,1))\nexang=st.selectbox(\'Exercise Induced Angina\',["Yes","No"])\noldpeak=st.number_input(\'oldpeak\')\nslope = st.selectbox(\'Heart Rate Slope\',("Upsloping: better heart rate with excercise(uncommon)","Flatsloping: minimal change(typical healthy heart)","Downsloping: signs of unhealthy heart"))\nca=st.selectbox(\'Number of Major Vessels Colored by Flourosopy\',range(0,5,1))\nthal=st.selectbox(\'Thalium Stress Result\',range(1,8,1))\n\n\n\n#user_input=preprocess(sex,cp,exang, fbs, slope, thal )\npred=preprocess(oldpeak,exang,sex,thal,cp,slope,ca,restecg,age)\n\n\n\n\nst.button("Predict")  \nif pred[0] == 0:\n    st.write(\'Warning! You have high risk of getting a heart attack!\')\n    \nelse:\n    st.write(\'You have lower risk of getting a heart disease!\')\n    \n   \n\nst.sidebar.subheader("About App")\n\nst.sidebar.info("This web app is helps you to find out whether you are at a risk of developing a heart disease.")\nst.sidebar.info("Enter the required fields and click on the \'Predict\' button to check whether you have a healthy heart")\nst.sidebar.info("Don\'t forget to rate this app")\n\n\n\nfeedback = st.sidebar.slider(\'How much would you rate this app?\',min_value=0,max_value=5,step=1)\n\nif feedback:\n  st.header("Thank you for rating the app!")\n  st.info("Caution: This is just a prediction and not doctoral advice. Kindly see a doctor if you feel the symptoms persist.") \n\n')


# In[ ]:





# In[ ]:




