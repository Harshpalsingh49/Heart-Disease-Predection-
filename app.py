#!/usr/bin/env python
# coding: utf-8

# In[70]:


get_ipython().run_cell_magic('writefile', 'app1.py', 'from email import header\nimport numpy as np\nfrom pandas import options\nimport streamlit as st\nimport pickle\nimport pandas as pd\nfrom sklearn.preprocessing import StandardScaler\nscal=StandardScaler()\n#from keras.models import load_model\n\nheader = st.container()\ndataset = st.container()\n# features = st.container()\n# model_training = st.container()\n\n# Loading pickled file.\nwith open(r\'C:\\Users\\Harshpalsingh\\Desktop\\Heartapp.pkl\',\'rb\') as f:\n      model = pickle.load(f)\n\ndef predict(age,sex,cp,oldpeak,thal,restecg,slope,exang,ca):\n    \n    if sex=="male":\n        sex=1 \n    else: sex=0\n    \n    \n    if cp=="Typical angina":\n        cp=0\n    elif cp=="Atypical angina":\n        cp=1\n    elif cp=="Non-anginal pain":\n        cp=2\n    elif cp=="Asymptomatic":\n        cp=2\n    \n    if exang=="Yes":\n        exang=1\n    elif exang=="No":\n        exang=0\n\n \n    if slope=="Upsloping: better heart rate with excercise(uncommon)":\n        slope=0\n    elif slope=="Flatsloping: minimal change(typical healthy heart)":\n          slope=1\n    elif slope=="Downsloping: signs of unhealthy heart":\n        slope=2  \n \n    if thal=="fixed defect: used to be defect but ok now":\n        thal=6\n    elif thal=="reversable defect: no proper blood movement when excercising":\n        thal=7\n    elif thal=="normal":\n        thal=2.31\n\n    if restecg=="Nothing to note":\n        restecg=0\n    elif restecg=="ST-T Wave abnormality":\n        restecg=1\n    elif restecg=="Possible or definite left ventricular hypertrophy":\n        restecg=2\n \n    user_input=[age,sex,cp,oldpeak,thal,restecg,slope,exang,ca]\n    user_input=np.array(user_input)\n    user_input=user_input.reshape(1,-1)\n    user_input=scal.fit_transform(user_input)\n    prediction = model.predict(user_input)\n\n    return prediction\n\n\nwith header:\n    #Setting Title of App\n    st.title("Heart Disease Prediction.")\n    st.text("You can determine if a person has heart disease by letting them input data about themselves.")\n    \nwith dataset:\n    def main():\n        st.text("By Harshpal Singh Juneja")\n#         st.text("This data is used to predict.")\n        html_temp = """\n        <style>\n            .reportview-container .main .block-container{{\n                max-width: 90%;\n                padding-top: 5rem;\n                padding-right: 5rem;\n                padding-left: 5rem;\n                padding-bottom: 5rem;\n            }}\n            img{{\n                max-width:40%;\n                margin-bottom:40px;\n            }}\n        </style>\n        """\n        st.markdown(html_temp, unsafe_allow_html=True)\n        \n        age=st.number_input("Age",min_value=1, max_value=121,step=1, )\n        st.markdown(f\'Age: {age}\')\n        sex = st.radio("Select Gender: ", (\'male\', \'female\'))\n        st.markdown(f\'Sex: {sex}\')\n        cp = st.selectbox(\'Chest Pain Type\',("Typical angina","Atypical angina","Non-anginal pain","Asymptomatic"))\n        st.markdown(f\'Chest Pain Type: {cp}\')\n#trestbps=st.selectbox(\'Resting Blood Sugar\',range(1,500,1))\n        restecg=st.selectbox(\'Resting Electrocardiographic Results\',("Nothing to note","ST-T Wave abnormality","Possible or definite left ventricular hypertrophy"))\n        st.markdown(f\'restecg: {restecg}\')\n    #chol=st.selectbox(\'Serum Cholestoral in mg/dl\',range(1,1000,1))\n\n#fbs=st.radio("Fasting Blood Sugar higher than 120 mg/dl", [\'Yes\',\'No\'])\n#thalach=st.selectbox(\'Maximum Heart Rate Achieved\',range(1,300,1))\n        exang=st.selectbox(\'Exercise Induced Angina\',["Yes","No"])\n        st.markdown(f\'Exercise Induced Angina: {exang}\')\n        oldpeak=st.number_input(label=\'oldpeak\',step=1.,format="%.2f")\n        st.markdown(f\'oldpeak: {oldpeak}\')\n        slope = st.selectbox(\'Heart Rate Slope\',("Upsloping: better heart rate with excercise(uncommon)","Flatsloping: minimal change(typical healthy heart)","Downsloping: signs of unhealthy heart"))\n        st.markdown(f\'Heart Rate Slope: {slope}\')\n        ca=st.selectbox(\'Number of Major Vessels Colored by Flourosopy\',range(0,5,1))\n        st.markdown(f\'Number of Major Vessels: {ca}\')\n        thal=st.selectbox(\'Thalium Stress Result\',range(1,8,1))\n        st.markdown(f\'Thalium Stress Result: {thal}\')\n        pred=predict(age,sex,cp,oldpeak,thal,restecg,slope,exang,ca)\n        \n        #result=""\n        \n        if st.button("Predict"):    \n            if pred == 1:\n                st.success (\'Warning! You have high risk of getting a heart attack!\')\n#                 st.markdown(red[st.success(\'Warning! You have high risk of getting a heart attack!\')])\n    \n        else:\n            st.success(\'You have lower risk of getting a heart disease!\')\n    \n\nif __name__==\'__main__\':\n    main()\n')


# In[ ]:





# In[ ]:




